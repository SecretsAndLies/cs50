{% extends "network/layout.html" %}
{% load static %}

{% block body %}

<!-- NOTE, I wanted to style my form elements with bootstrap. This code was stolen from here:
  https://www.reddit.com/r/django/comments/lwlrwo/the_current_state_of_styling_a_django_formapp/ -->
<div class="postform">
    <form action="{% url 'add' %}" method="post">

        {% csrf_token %}

        {% for field in form %}
        {% if field.is_hidden %}
          {{ field }}
        {% else %}
          {% if field.field.widget.input_type == "checkbox" %}
            <!-- checkbox output here -->
          {% else %}
            <label for="{{ field.id_for_label }}">
              {{ field.label }}
              {% if field.field.required == False %}
                (optional)
              {% endif %}
            </label>
            <input type="{{ field.field.widget.input_type }}" class="form-control{% if field.errors %} is-invalid{% endif %}" id="{{ field.id_for_label }}" value="{{ field.value|default_if_none:"" }}" name="{{ field.html_name }}"{% if field.help_text %} aria-describedby="{{ field.id_for_label }}_help"{% endif %}{% for name, value in field.field.widget.attrs.items %}{% if value is not False %} {{ name }}{% if value is not True %}="{{ value|stringformat:'s' }}"{% endif %}{% endif %}{% endfor %}{% if field.field.required %}required{% endif %}>
          {% endif %}
        {% endif %}
      {% endfor %}
      
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>


{% for post in posts %}
<div class="post" id="p{{post.id}}">
  <div id="pc{{post.id}}">{{post.content}}</div>

  <div class="light"> {{post.timePosted}}</div>
  <div id="hc{{post.id}}" class="light hearts">üëç {{post.hearts}}</div>


  <button id="hb{{post.id}}" style="display: block;" class="btn btn-outline-secondary heart-button" data-post="{{ post.id }}" >üëç</button>
  <button id="uhb{{post.id}}" style="display: block;" class="btn btn-outline-secondary unheart-button" data-post="{{ post.id }}" >üëé</button>

  {% if request.user.id == post.postingUser.id%}
  <button class="btn btn-outline-secondary post-button" data-post="{{ post.id }}" >Edit</button>
    {% endif %}

    <a href="{% url 'user' post.postingUser.id %}">
  <button  type="button" class="btn btn-outline-secondary">See all posts from
    {{post.postingUser.username}}</button>
  </a>
</div> 

<div class="edit-post" id="e{{post.id}}"></div>

{% endfor %}
<nav aria-label="Page navigation example">
  <ul class="pagination">
    {% if posts.has_previous %}
    <li class="page-item"><a class="page-link" href="{% url 'index' posts.previous_page_number %}">Previous</a></li>
    {% endif %}

    {% for page in pages.page_range %}
    {% if currentPageNum == page%}
    <li class="page-item"><a class="page-link" href="{% url 'index' page %}"><div class="bold">{{page}}</div></a></li>
    {% else %}
    <li class="page-item"><a class="page-link" href="{% url 'index' page %}">{{page}}</a></li>
    {% endif %}


    {% endfor %}

    {% if posts.has_next %}
    <li class="page-item"><a class="page-link" href="{% url 'index' posts.next_page_number %}">Next</a></li>
    {% endif %}


  </ul>
</nav>


{% endblock %}

{% block script %}
<script src="{% static 'network/posts.js' %}"></script>
{% endblock %}